<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Diego Weather Forecast</title>
    <style>
        *{
            --background-img: url('background.jpg');
        }
        body{
            font-size:xx-large;
            color:black;
            background-image: var(--background-img);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        #forecast{
            margin: auto;
            width: 50%;
            border: 3px solid black;
            padding: 10px;
            background-color:white;
        }
    </style>
</head>
<body>
    <main>
        <h1>Current Weather</h1>
        <section id="forecast">
            <p id="nojs">Current Weather Conditions Unavailable</p>
        </section>
    </main>
    <script>
        const latitude = 32.8328;
        const longitude = -117.2713;
        //fetch based on location
        fetch(`https://api.weather.gov/points/${latitude},${longitude}`)
        .then(response => response.json())
        .then(data => {
             //get the data we fetch
            const forecastUrl = data.properties.forecast;
            console.log(forecastUrl);
            //use the previous url to fetch
            fetch(forecastUrl)
                .then(response => response.json())
                .then(forecastData => {
                    //capture the fetched period data
                    const periods = forecastData.properties.periods;
                    console.log(forecastData.properties);
                    console.log(periods[0]);
                    console.log(periods[0].detailedForecast);
                    const forecastElement = document.getElementById('forecast');
                    const { name, temperature, shortForecast,probabilityOfPrecipitation,relativeHumidity,dewpoint } = periods[0];
                    forecastElement.innerHTML = `<p><strong>${name}:</strong> ${temperature}&deg;F - ${shortForecast}</p>`;
                    forecastElement.innerHTML +=`<p>Probability of Precipitation: ${probabilityOfPrecipitation.value}<p>`;
                    forecastElement.innerHTML +=`<p>relative Humidity: ${relativeHumidity.value}%<p>`;
                    forecastElement.innerHTML +=`<p>dewpoint: ${dewpoint.value}<p>`;
                })
                .catch(error => console.error('Error fetching forecast:', error));
        })
        .catch(error => console.error('Error fetching coordinates:', error));
    </script>
</body>
</html>